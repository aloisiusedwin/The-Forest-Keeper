[gd_scene load_steps=22 format=3 uid="uid://d1ruhs06n6oex"]

[ext_resource type="Script" path="res://Scripts/Interactables/locked_door.gd" id="1_cfcyt"]
[ext_resource type="Script" path="res://Player/Interact/interactable.gd" id="2_ystw4"]
[ext_resource type="Material" uid="uid://p1pa80kmxdwk" path="res://Materials/Grids/orange_grid_mat.tres" id="3_sj1hp"]
[ext_resource type="Script" path="res://Scripts/Interactables/door_key.gd" id="4_ru04b"]
[ext_resource type="Material" uid="uid://dotputwgu16qw" path="res://Materials/Grids/red_grid_mat.tres" id="5_32kg3"]
[ext_resource type="AudioStream" uid="uid://haf3yd48cmqg" path="res://Audios/TestAudio/Item Pick up (Counter Strike Source) - Sound Effect for editing.wav" id="6_2gqtu"]
[ext_resource type="AudioStream" uid="uid://1edogo7ul6fk" path="res://Audios/TestAudio/Door Open.wav" id="7_224qe"]
[ext_resource type="AudioStream" uid="uid://nko7h0v2up78" path="res://Audios/TestAudio/Door Close.wav" id="8_yq60a"]
[ext_resource type="AudioStream" uid="uid://dmm2jr55ghwd5" path="res://Audios/TestAudio/lock_door_sfx.wav" id="9_rq7ab"]
[ext_resource type="AudioStream" uid="uid://k4csirlffbdd" path="res://Audios/TestAudio/door_unlock_sfx.wav" id="10_pxcgd"]

[sub_resource type="BoxShape3D" id="BoxShape3D_tsvbp"]
size = Vector3(0.05, 2.45, 1.05)

[sub_resource type="BoxShape3D" id="BoxShape3D_4wxhs"]
size = Vector3(0.3, 0.1, 0.3)

[sub_resource type="Animation" id="Animation_ry5yi"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("StaticBody3D:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("StaticBody3D/CollisionShape3D:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_grpr7"]
resource_name = "pickup"
length = 0.71
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.7),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"_audio_play"
}, {
"args": [],
"method": &"queue_free"
}]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("StaticBody3D:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("StaticBody3D")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"_ci_flase"
}]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("StaticBody3D/CollisionShape3D:disabled")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_v1p2i"]
_data = {
"RESET": SubResource("Animation_ry5yi"),
"pickup": SubResource("Animation_grpr7")
}

[sub_resource type="Animation" id="Animation_82wtf"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("StaticBody3D:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("StaticBody3D/Door_Mesh/Door_Handle:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(4.37114e-08, -4.37114e-08, -1.5708)]
}

[sub_resource type="Animation" id="Animation_t0q20"]
resource_name = "close"
length = 1.5
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("StaticBody3D:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.2, 1.25, 1.35, 1.5),
"transitions": PackedFloat32Array(-2, 1, 0.5, 1, 1),
"update": 0,
"values": [Vector3(0, -1.8326, 0), Vector3(0, -0.0872665, 0), Vector3(0, -0.0872665, 0), Vector3(0, 0.0174533, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("StaticBody3D")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.5),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"_ci_flase"
}, {
"args": [],
"method": &"_ci_true"
}]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(1.2),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"_audio_close_play"
}]
}

[sub_resource type="Animation" id="Animation_h2r0j"]
resource_name = "locked"
length = 0.72
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"_locked_door_play"
}]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("StaticBody3D:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4),
"transitions": PackedFloat32Array(-0.5, -2, -0.5, -2, -0.5),
"update": 0,
"values": [Vector3(0, 3.55271e-15, 0), Vector3(0, 0.0174533, 0), Vector3(0, -0.0174533, 0), Vector3(0, 0.0174533, 0), Vector3(0, 0, 0)]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("StaticBody3D")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.7),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"_ci_flase"
}, {
"args": [],
"method": &"_ci_true"
}]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("StaticBody3D/Door_Mesh/Door_Handle:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(4.37114e-08, -4.37114e-08, -1.5708), Vector3(0.174533, 0, -1.5708), Vector3(0, 0, -1.5708), Vector3(-0.174533, 0, -1.5708), Vector3(0, 0, -1.5708)]
}

[sub_resource type="Animation" id="Animation_4ew36"]
resource_name = "open"
length = 1.5
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("StaticBody3D:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.2, 1.5),
"transitions": PackedFloat32Array(-2, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, -1.8326, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("StaticBody3D/Door_Mesh/Door_Handle:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.2, 0.6),
"transitions": PackedFloat32Array(0.5, 2, -2),
"update": 0,
"values": [Vector3(4.37114e-08, -4.37114e-08, -1.5708), Vector3(-1.39626, 0, -1.5708), Vector3(4.37114e-08, -4.37114e-08, -1.5708)]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("StaticBody3D")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 1.5),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"_ci_flase"
}, {
"args": [],
"method": &"_ci_true"
}]
}
tracks/3/type = "method"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath(".")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"_audio_open_play"
}]
}

[sub_resource type="Animation" id="Animation_nxywk"]
resource_name = "unlocked"
length = 0.3
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"_door_unlocked_play"
}, {
"args": [],
"method": &"_dlc_false"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ajxqq"]
_data = {
"RESET": SubResource("Animation_82wtf"),
"close": SubResource("Animation_t0q20"),
"locked": SubResource("Animation_h2r0j"),
"open": SubResource("Animation_4ew36"),
"unlocked": SubResource("Animation_nxywk")
}

[node name="LockedDoor" type="Node3D" node_paths=PackedStringArray("animator", "door_open_sfx", "door_close_sfx", "locked_door_sfx", "door_unlokced_sfx")]
transform = Transform3D(-4.06516e-08, 0, 0.93, 0, 0.93, 0, -0.93, 0, -4.06516e-08, -7.41107, 1.15281, -3.31184)
script = ExtResource("1_cfcyt")
animator = NodePath("AnimationPlayer")
door_open_sfx = NodePath("DoorOpenSfx")
door_close_sfx = NodePath("DoorCloseSfx")
locked_door_sfx = NodePath("LockedDoorSfx")
door_unlokced_sfx = NodePath("DoorUnlockedSfx")

[node name="StaticBody3D" type="StaticBody3D" parent="."]
script = ExtResource("2_ystw4")

[node name="Door_Mesh" type="CSGBox3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 1.77636e-14, 0, 1, 0, -1.77636e-14, 0, 1, 0.0114779, -0.118509, 0.491316)
material_override = ExtResource("3_sj1hp")
size = Vector3(0.13, 2.23, 0.98)

[node name="Door_Handle" type="CSGCylinder3D" parent="StaticBody3D/Door_Mesh"]
transform = Transform3D(-3.61999e-06, 1, -4.37114e-08, -1, -3.61999e-06, -4.37114e-08, -4.37116e-08, 4.37112e-08, 1, 0, 0, 0.4)
radius = 0.05
height = 0.18
sides = 5

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0247424, 0, 0.535051)
shape = SubResource("BoxShape3D_tsvbp")

[node name="LDoor_Key" type="Node3D" parent="."]
transform = Transform3D(0.866025, 0, -0.5, 0, 1, 0, 0.5, 0, 0.866025, -0.426386, -1.13843, 1.33378)
script = ExtResource("4_ru04b")

[node name="StaticBody3D" type="StaticBody3D" parent="LDoor_Key"]
transform = Transform3D(1, 0, 3.55271e-15, 0, 1, 0, -3.55271e-15, 0, 1, 0, 0, 0)
script = ExtResource("2_ystw4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="LDoor_Key/StaticBody3D"]
transform = Transform3D(1, 0, 1.06581e-14, 0, 1, 0, -1.06581e-14, 0, 1, 0, -0.0547134, 0)
shape = SubResource("BoxShape3D_4wxhs")

[node name="CSGBox3D" type="CSGBox3D" parent="LDoor_Key/StaticBody3D"]
transform = Transform3D(1, 0, 3.90799e-14, 0, 1, 0, -3.90799e-14, 0, 1, 0, -0.0756912, -0.101562)
material_override = ExtResource("5_32kg3")
size = Vector3(0.1, 0.02, 0.1)

[node name="CSGBox3D2" type="CSGBox3D" parent="LDoor_Key/StaticBody3D/CSGBox3D"]
transform = Transform3D(1, 0, 2.13163e-14, 0, 1, 0, -2.13163e-14, 0, 1, 0, 0, 0.146037)
material_override = ExtResource("5_32kg3")
size = Vector3(0.03, 0.01, 0.2)

[node name="CSGBox3D3" type="CSGBox3D" parent="LDoor_Key/StaticBody3D/CSGBox3D"]
transform = Transform3D(1, 0, 2.13163e-14, 0, 1, 0, -2.13163e-14, 0, 1, 0.0285597, 0, 0.174274)
material_override = ExtResource("5_32kg3")
size = Vector3(0.05, 0.01, 0.02)

[node name="CSGBox3D4" type="CSGBox3D" parent="LDoor_Key/StaticBody3D/CSGBox3D"]
transform = Transform3D(1, 0, 2.13163e-14, 0, 1, 0, -2.13163e-14, 0, 1, 0.0285597, 0, 0.215701)
material_override = ExtResource("5_32kg3")
size = Vector3(0.05, 0.01, 0.02)

[node name="AnimationPlayer" type="AnimationPlayer" parent="LDoor_Key"]
libraries = {
"": SubResource("AnimationLibrary_v1p2i")
}

[node name="PickUpSfx" type="AudioStreamPlayer3D" parent="LDoor_Key"]
stream = ExtResource("6_2gqtu")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_ajxqq")
}

[node name="DoorOpenSfx" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(0.977517, 0, -3.19744e-14, 0, 0.977517, 0, 3.19744e-14, 0, 0.977517, 0, 0, 0.931208)
stream = ExtResource("7_224qe")

[node name="DoorCloseSfx" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(0.977517, 0, -2.84217e-14, 0, 0.977517, 0, 2.84217e-14, 0, 0.977517, 0, 0, 0.931208)
stream = ExtResource("8_yq60a")
volume_db = -10.0

[node name="LockedDoorSfx" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("9_rq7ab")

[node name="DoorUnlockedSfx" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(0.977517, 0, 3.55271e-15, 0, 0.977517, 0, -3.55271e-15, 0, 0.977517, 0, 0, 0)
stream = ExtResource("10_pxcgd")

[connection signal="interacted" from="StaticBody3D" to="." method="_on_door_interacted"]
[connection signal="interacted" from="LDoor_Key/StaticBody3D" to="LDoor_Key" method="_on_static_body_3d_interacted"]
